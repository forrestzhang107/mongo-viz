(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{42:function(e,t,a){e.exports=a(96)},48:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),u=(a(47),a(48),a(15)),s=a(10),o=a(1),i=a.n(o),m=a(4),p=a(3),f=a(97),b=a(16),d=a.n(b),E=a(12),v=a.n(E),h=a(61);function O(e){return j.apply(this,arguments)}function j(){return(j=Object(m.a)(i.a.mark((function e(t){var a,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,h.post("/api"+t,JSON.stringify(a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return N.apply(this,arguments)}function N(){return(N=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post("/api/delete-document",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return w.apply(this,arguments)}function w(){return(w=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post("/api/drop-collection",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return S.apply(this,arguments)}function S(){return(S=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post("/api/create-collection",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return x.apply(this,arguments)}function x(){return(x=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post("/api/get-documents/"+JSON.stringify(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D={content:{top:"33%",left:"50%",right:"auto",bottom:"auto",transform:"translate(-50%, -50%)"}};d.a.setAppElement("#root");var I=function(e){var t=Object(n.useState)(null),a=Object(p.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(localStorage.getItem("dbName")||""),s=Object(p.a)(u,2),o=s[0],b=s[1],E=Object(n.useState)(!1),h=Object(p.a)(E,2),j=h[0],y=h[1],N=Object(n.useState)(!1),w=Object(p.a)(N,2),S=w[0],C=w[1],x=Object(n.useState)(""),I=Object(p.a)(x,2),J=I[0],M=I[1],A=Object(n.useState)(""),F=Object(p.a)(A,2),q=F[0],z=F[1];function L(){return T.apply(this,arguments)}function T(){return(T=Object(m.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(null),e.next=3,O("/get-database-info");case 3:t=e.sent,a=t.data,l(a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){Object(m.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("/get-database-id");case 2:t=e.sent,a=t.data,localStorage.setItem("dbName",a),b(a);case 6:case"end":return e.stop()}}),e)})))()}),[]),Object(n.useEffect)((function(){L()}),[]),r.a.createElement(f.a,null,r.a.createElement("div",{className:"card-max"},r.a.createElement("div",{className:"db-header"},o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"db-title"},r.a.createElement("h3",{className:"mb-0"},o),r.a.createElement("i",{className:"fas fa-sync",onClick:L})),r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("button",{className:"app-button",onClick:function(){M(""),y(!0)}},"New Collection"),r.a.createElement(d.a,{isOpen:j,style:D,onRequestClose:function(){return y(!1)}},r.a.createElement("form",{className:"modal-form",onSubmit:function(e){e.preventDefault(),function(){W.apply(this,arguments)}()}},"New Collection:",r.a.createElement("input",{value:J,onChange:function(e){return M(e.target.value)}}),r.a.createElement("button",{className:"app-button",type:"submit"},"Submit"),r.a.createElement("button",{className:"app-button",onClick:function(e){e.preventDefault(),y(!1)}},"Cancel")))),r.a.createElement("span",null,r.a.createElement("button",{className:"app-button",onClick:function(){z(""),C(!0)}},"Drop Collection"),r.a.createElement(d.a,{isOpen:S,style:D,onRequestClose:function(){return C(!1)}},r.a.createElement("form",{className:"modal-form",onSubmit:function(e){e.preventDefault(),function(){P.apply(this,arguments)}()}},"Drop Collection:",r.a.createElement("input",{value:q,onChange:function(e){return z(e.target.value)}}),r.a.createElement("button",{className:"app-button",type:"submit"},"Submit"),r.a.createElement("button",{className:"app-button",onClick:function(e){e.preventDefault(),C(!1)}},"Cancel"))))))),c?r.a.createElement("table",{className:"db-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Collection"),r.a.createElement("th",null,"Document Count"),r.a.createElement("th",null,"Collection Size"),r.a.createElement("th",null,"Average Size"))),r.a.createElement("tbody",null,c.map((function(t,a){return r.a.createElement("tr",{key:a,className:"collection",onClick:function(){return a=t.collectionID,void e.history.push("/collection?id="+a);var a}},r.a.createElement("td",null,t.collectionID),r.a.createElement("td",null,t.count),r.a.createElement("td",null,B(t.size)),r.a.createElement("td",null,B(t.avgObjSize)))})))):r.a.createElement("div",{className:"loader-wrapper"},r.a.createElement(v.a,{type:"spin",color:"#00aaff"}))));function W(){return(W=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k({collectionID:J});case 2:200===e.sent.status&&(y(!1),L());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({collectionID:q});case 2:200===e.sent.status&&(C(!1),L());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}};function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!e)return"0 Bytes";var a=1024,n=t<0?0:t,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],c=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,c)).toFixed(n))+" "+r[c]}var J=a(98),M=a(99),A=a(37),F=a.n(A);function q(e){var t=Object(n.useState)(!1),a=Object(p.a)(t,2),c=a[0],l=a[1],u=e.object,s=Array.isArray(u)?"Array":"Object",o=Object.keys(u),i=0===o.length;return c?r.a.createElement("span",null,r.a.createElement("span",{className:"toggle",onClick:function(){return l(!1)}},s),r.a.createElement("div",{className:"fluid"},r.a.createElement("div",{className:"indent"},o.map((function(t,a){return r.a.createElement("span",{key:a},z(t,u[t],e.active))})),i&&r.a.createElement("div",null,"(empty)")))):r.a.createElement("span",{onClick:function(){return l(!0)},className:"toggle"},s)}function z(e,t,a){if(t!==Object(t)){var n=function(e){return null==e?"null":function(e){return!!e&&(24===e.length&&("T"===e.charAt(10)&&"Z"===e.charAt(23)))}(e)?"datetime":typeof e}(t);return"datetime"===n&&(t=F()(t).format("LL LTS")),r.a.createElement("div",{className:"hspread"},r.a.createElement("div",null,e,": ",r.a.createElement("span",{className:n},function(e){return null==e?"null":e.toString()}(t))),a?r.a.createElement("div",{className:"type"},n):"")}return r.a.createElement("div",null,e,": ",r.a.createElement(q,{object:t,active:a}))}var L=function(e){var t=Object(n.useState)(!1),a=Object(p.a)(t,2),c=a[0],l=a[1],u=e.data,s=Object.keys(u);return r.a.createElement("div",{className:"document hspread",onMouseOver:function(){return l(!0)},onMouseLeave:function(){return l(!1)}},r.a.createElement("div",{className:"fluid"},s.map((function(e,t){return r.a.createElement("span",{key:t},z(e,u[e],c))}))),r.a.createElement("div",{className:"toolbar "+(c?"":"transparent")},r.a.createElement("i",{onClick:function(){return function(){return o.apply(this,arguments)}()},className:"fa fa-times","aria-hidden":"true"})));function o(){return(o=Object(m.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y({collectionID:e.collectionID,objectID:e.data._id});case 2:200===t.sent.status&&e.refresh();case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},T=a(38),W=a.n(T);function P(e){var t=e.trail;return r.a.createElement("div",{className:"crumbs"},t.map((function(e,t){var a=Object(p.a)(e,2),n=a[0],c=a[1];return r.a.createElement("span",{key:n},c?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{to:c},n),r.a.createElement("i",{className:"fas fa-chevron-right"})):r.a.createElement("span",{style:{fontWeight:"500"}},n))})))}var R=function(e){var t=localStorage.getItem("dbName"),a=Object(n.useState)(null),c=Object(p.a)(a,2),l=c[0],u=c[1],s=Object(n.useState)(1),o=Object(p.a)(s,2),b=o[0],d=o[1],E=Object(n.useState)(null),h=Object(p.a)(E,2),O=h[0],j=h[1],y=Object(n.useState)(null),N=Object(p.a)(y,2),g=N[0],w=N[1],k=Object(n.useState)(""),S=Object(p.a)(k,2),x=S[0],D=S[1],I=Object(n.useState)("{}"),B=Object(p.a)(I,2),A=B[0],F=B[1],q=Object(n.useState)(""),z=Object(p.a)(q,2),T=z[0],R=z[1],Z=Object(n.useState)("{}"),G=Object(p.a)(Z,2),K=G[0],Q=G[1];return Object(n.useEffect)((function(){var e=W.a.parse(window.location.search);u(e.id)}),[]),Object(n.useEffect)((function(){l&&V({collectionID:l,page:b,query:JSON.parse(A),sort:JSON.parse(K)})}),[l,b,A,K]),Object(n.useEffect)((function(){var e={},t=x.split("=");try{t[1]&&(e[t[0]]=JSON.parse(t[1])),F(JSON.stringify(e))}catch(a){F("{}")}}),[x]),Object(n.useEffect)((function(){var e={},t=T.split("="),a=t[1];"1"===a||"-1"===a?(e[t[0]]=parseInt(a),Q(JSON.stringify(e))):Q("{}")}),[T]),r.a.createElement(f.a,null,r.a.createElement(P,{trail:[[t,"/auth/database"],[l]]}),r.a.createElement("div",{className:"card-max"},r.a.createElement("div",{className:"db-header"},r.a.createElement("div",{className:"db-title"},r.a.createElement("h3",{className:"mb-0"},l),r.a.createElement("i",{className:"fas fa-sync",onClick:function(){return _.apply(this,arguments)}})),Y()),r.a.createElement(J.a,{className:"mb-16"},r.a.createElement(M.a,{lg:6},r.a.createElement("div",{className:"hspread vcenter"},r.a.createElement("div",null,"Query:"),r.a.createElement("input",{className:"opt-input",value:x,onChange:function(e){return D(e.target.value)}}))),r.a.createElement(M.a,{lg:6},r.a.createElement("div",{className:"hspread vcenter"},r.a.createElement("div",null,"Sort:"),r.a.createElement("input",{className:"opt-input",value:T,onChange:function(e){return R(e.target.value)}})))),g?r.a.createElement(r.a.Fragment,null,g.map((function(e,t){return r.a.createElement(L,{key:t,collectionID:l,data:e,refresh:H})}))):r.a.createElement("div",{className:"loader-wrapper"},r.a.createElement(v.a,{type:"spin",color:"#00aaff"})),g&&r.a.createElement("div",{className:"bottom-nav"},Y())));function Y(){if(O>1)return r.a.createElement("div",null,b>1&&r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{onClick:function(){return $(1)},className:"nav-icon fas fa-angle-double-left"}),r.a.createElement("i",{onClick:function(){return $(b-1)},className:"nav-arrow fas fa-angle-left"})),"Page ",b+" of "+O,b<O&&r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{onClick:function(){return $(b+1)},className:"nav-arrow fas fa-angle-right"}),r.a.createElement("i",{onClick:function(){return $(O)},className:"nav-icon fas fa-angle-double-right"})))}function $(e){w(null),d(e)}function _(){return(_=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:1===b&&""===x&&""===T?V({collectionID:l,page:1}):(d(1),D(""),R(""));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return U.apply(this,arguments)}function U(){return(U=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V({collectionID:l,page:b,query:JSON.parse(A),sort:JSON.parse(K)});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return X.apply(this,arguments)}function X(){return(X=Object(m.a)(i.a.mark((function e(t){var a,n,r,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(null),a=t.page,e.next=4,C(t);case 4:n=e.sent,r=n.data,c=r.results,l=r.count,w(c),j(Math.ceil(l/10)),!c[0]&&a>1&&d(a-1);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}};var Z=function(){return r.a.createElement(u.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/database",component:I}),r.a.createElement(s.b,{path:"/collection",component:R}),r.a.createElement(s.a,{from:"/",to:"/database"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.14784b3a.chunk.js.map